/*! wee-promise - 0.1.5 - Bernard McManus - g6f504a - 2014-11-18 */
!function(a){"object"==typeof exports?module.exports=a:window.Promise=window.Promise||a}(function(a,b){function c(a){var b=this;g(b,m,0),g(b,n,[]),g(b,r,[]),g(b,s,[]),g(b,t,[]),h(function(){i(b,function(){a(d(b,s),d(b,t))}),b[w]=!0})}function d(a,b){function c(d){h(a[w]?function(){a[m]||a[v](b,d)[v](r,d)}:function(){c(d)})}return c}function e(a,b,c,d,e){return function(){var g=f(a,1),h=f(a,-1);if(j(g)===d){var i=g.map(function(a){return a[n][0]});b(e?i[0]:i)}else j(h)>0&&c(h[0][n][0])}}function f(a,b){return a.filter(function(a){return a[m]===b})}function g(b,c,d){a.defineProperty(b,c,{value:d,writable:!0})}function h(a){b(a,1)}function i(a,b){try{b()}catch(c){a[v](t,c)}}function j(a){return a.length}function k(a,b){a.forEach(b)}var l="prototype",m="state",n="args",o="always",p="then",q="catch",r="_"+o,s="_"+p,t="_"+q,u="_add",v="_exec",w="_ready",x={};return x[t]=-1,x[s]=1,c[l][u]=function(a,b){var c=this;return b&&c[a].push(b),c},c[l][v]=function(a,b){b=[b];var c=this,d=c[a],e=j(d),f=0;return i(c,function(){for(;e>f;)(x[a]?d.shift():d[f]).apply(null,b),f++}),c[n]=b,c[m]=x[a]||c[m],c},c[l][o]=function(a){return this[u](r,a)},c[l][p]=function(a,b){return this[u](s,a)[q](b)},c[l][q]=function(a){return this[u](t,a)},c.all=function(a){return new c(function(b,c){k(a,function(d){d[o](e(a,b,c,j(a)))})})},c.race=function(a){return new c(function(b,c){k(a,function(d){d[o](e(a,b,c,1,!0))})})},c}(Object,setTimeout));