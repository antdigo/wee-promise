/*! wee-promise - 0.1.1 - Bernard McManus - g5d0c72 - 2014-08-21 */
!function(a){"object"==typeof exports?module.exports=a:window.Promise=window.Promise||a}(function(a,b){function c(a){var c=this;g(c,k,0),g(c,l,[]),g(c,m,[]),g(c,n,[]),b(function(){a(d(c,1,m),d(c,-1,n))},0)}function d(a,b,c){return function(){if(!a[k]){var d=arguments;a[k]=b,a._execHandler(c,d,!0)._execHandler(l,d)._clear()}}}function e(a,b,c,d){return function(){var e=f(a,1,function(a){return a===d}),g=f(a,-1,function(a){return a>0});e?b():g&&c(),(e||g)&&i(a,function(a){a._clear()})}}function f(a,b,c){return c(h(a.filter(function(a){return a[k]===b})))}function g(b,c,d){a.defineProperty(b,c,{value:d,writable:!0})}function h(a){return a.length}function i(a,b){a.forEach(b)}var j="prototype",k="state",l="_always",m="_then",n="_catch";return c[j]={},c[j]._addHandler=function(a,b){var c=this;return c[a].push(b),c},c[j]._execHandler=function(a,b,c){for(var d=this,e=d[a],f=h(e),g=0;f>g&&h(e)>0;){try{(c?e.shift():e[g]).apply(null,b)}catch(i){d._execHandler(n,[i],!0);break}g++}return d},c[j].always=function(a){return this._addHandler(l,a)},c[j].then=function(a){return this._addHandler(m,a)},c[j].catch=function(a){return this._addHandler(n,a)},c[j]._clear=function(){var a=this;a[m]=[],a[n]=[],a[l]=[]},c.all=function(a){return new c(function(b,c){i(a,function(d){d.always(e(a,b,c,h(a)))})})},c.race=function(a){return new c(function(b,c){i(a,function(d){d.always(e(a,b,c,1))})})},c}(Object,setTimeout));